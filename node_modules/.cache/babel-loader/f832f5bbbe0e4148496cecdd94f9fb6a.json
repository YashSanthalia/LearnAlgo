{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yash santhalia\\\\Desktop\\\\React\\\\algo\\\\src\\\\TSP\\\\TSP.js\";\nimport React from \"react\";\nimport Sketch from \"react-p5\";\nimport Point from \"./Point\";\nimport NavBar from \"./NavBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet points = [];\nconst width = 800;\nconst height = 500;\nlet minDistance = 9999999;\nlet minDistancePath = [];\nlet order = [];\n\nclass TSP extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      stage: 0\n    };\n\n    this.setup = (p5, parent) => {\n      let xyz = p5.createCanvas(width, height).parent(parent);\n      let x = (p5.windowWidth - p5.width) / 2;\n      let y = (p5.windowHeight - p5.height) / 2;\n      xyz.position(x, y);\n    };\n\n    this.draw = p5 => {\n      if (!complete) {\n        p5.background(0);\n\n        if (this.state.stage === 0) {\n          p5.noStroke();\n          p5.fill(255);\n          p5.noCursor();\n          p5.ellipse(p5.mouseX, p5.mouseY, 12);\n        }\n\n        this.showPoints(p5);\n\n        if (this.state.stage === 1) {\n          this.showLines(order, p5, 255, 255, 255, 2);\n          let currentDistance = this.calcPathDistance(p5);\n\n          if (currentDistance < minDistance) {\n            minDistance = currentDistance;\n            minDistancePath = order.slice();\n            console.log(minDistance);\n          }\n\n          this.showLines(minDistancePath, p5, 255, 0, 255, 4);\n          this.nextOrder(p5);\n        }\n      }\n    };\n\n    this.calcPathDistance = p5 => {\n      let dist = 0;\n\n      for (let i = 1; i < order.length; i++) {\n        dist += p5.dist(points[order[i]].x, points[order[i]].y, points[order[i - 1]].x, points[order[i - 1]].y);\n      }\n\n      return dist;\n    };\n\n    this.nextOrder = p5 => {\n      var largestI = -1;\n\n      for (let i = 0; i < order.length - 1; i++) {\n        if (order[i] < order[i + 1]) {\n          largestI = i;\n        }\n      }\n\n      if (largestI == -1) {\n        complete = true;\n        console.log(\"finished\");\n      }\n\n      var largestJ = -1;\n\n      for (let j = 0; j < order.length; j++) {\n        if (order[largestI] < order[j]) {\n          largestJ = j;\n        }\n      }\n\n      this.swap(order, largestI, largestJ);\n      var endArray = order.splice(largestI + 1);\n      endArray.reverse();\n      order = order.concat(endArray);\n    };\n\n    this.showLines = (order, p5, r, g, b, strokeWeight) => {\n      p5.beginShape();\n      p5.stroke(r, g, b);\n      p5.strokeWeight(strokeWeight);\n      p5.noFill();\n\n      for (let i = 0; i < order.length; i++) {\n        p5.vertex(points[order[i]].x, points[order[i]].y);\n      }\n\n      p5.endShape();\n    };\n\n    this.showPoints = p5 => {\n      for (let i = 0; i < points.length; i++) {\n        p5.fill(points[i].r, points[i].g, points[i].b);\n        p5.ellipse(points[i].x, points[i].y, 15, 15);\n      }\n    };\n\n    this.mousePressed = e => {\n      if (this.state.stage === 0) {\n        let x = e.mouseX;\n        let y = e.mouseY;\n\n        if (x > 0 && x < width && y > 0 && y < height) {\n          points.push(new Point(x, y));\n        }\n      }\n    };\n\n    this.onBackButtonClick = () => {\n      points = [];\n      order = [];\n      this.props.onBackButtonClick();\n    };\n\n    this.onClearButtonClick = () => {\n      points = [];\n      order = [];\n      this.setState({\n        stage: 0\n      });\n    };\n\n    this.onStartButtonClick = () => {\n      order = [];\n\n      for (let i = 0; i < points.length; i++) {\n        order.push(i);\n      }\n\n      console.log(order);\n      this.setState({\n        stage: 1\n      });\n    };\n  }\n\n  swap(array, i, j) {\n    let temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(NavBar, {\n        stage: this.state.stage,\n        onBackButtonClick: this.onBackButtonClick,\n        onClearButtonClick: this.onClearButtonClick,\n        onStartButtonClick: this.onStartButtonClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sketch, {\n        setup: this.setup,\n        draw: this.draw,\n        mousePressed: this.mousePressed\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default TSP;","map":{"version":3,"sources":["C:/Users/yash santhalia/Desktop/React/algo/src/TSP/TSP.js"],"names":["React","Sketch","Point","NavBar","points","width","height","minDistance","minDistancePath","order","TSP","Component","state","stage","setup","p5","parent","xyz","createCanvas","x","windowWidth","y","windowHeight","position","draw","complete","background","noStroke","fill","noCursor","ellipse","mouseX","mouseY","showPoints","showLines","currentDistance","calcPathDistance","slice","console","log","nextOrder","dist","i","length","largestI","largestJ","j","swap","endArray","splice","reverse","concat","r","g","b","strokeWeight","beginShape","stroke","noFill","vertex","endShape","mousePressed","e","push","onBackButtonClick","props","onClearButtonClick","setState","onStartButtonClick","array","temp","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport Sketch from \"react-p5\";\r\nimport Point from \"./Point\";\r\nimport NavBar from \"./NavBar\";\r\n\r\nlet points = [];\r\nconst width = 800;\r\nconst height = 500;\r\nlet minDistance = 9999999;\r\nlet minDistancePath = [];\r\nlet order = [];\r\n\r\nclass TSP extends React.Component {\r\n  state = { stage: 0 };\r\n\r\n  setup = (p5, parent) => {\r\n    let xyz = p5.createCanvas(width, height).parent(parent);\r\n    let x = (p5.windowWidth - p5.width) / 2;\r\n    let y = (p5.windowHeight - p5.height) / 2;\r\n    xyz.position(x, y);\r\n  };\r\n\r\n  draw = (p5) => {\r\n    if(!complete){\r\n    p5.background(0);\r\n    if (this.state.stage === 0) {\r\n      p5.noStroke();\r\n      p5.fill(255);\r\n      p5.noCursor();\r\n      p5.ellipse(p5.mouseX, p5.mouseY, 12);\r\n    }\r\n    this.showPoints(p5);\r\n    if (this.state.stage === 1) {\r\n      this.showLines(order, p5, 255, 255, 255, 2);\r\n      let currentDistance = this.calcPathDistance(p5);\r\n      if (currentDistance < minDistance) {\r\n        minDistance = currentDistance;\r\n        minDistancePath = order.slice();\r\n        console.log(minDistance);\r\n      }\r\n      this.showLines(minDistancePath, p5, 255, 0, 255, 4);\r\n      this.nextOrder(p5);\r\n    }\r\n  }\r\n  };\r\n\r\n  calcPathDistance = (p5) => {\r\n    let dist = 0;\r\n    for (let i = 1; i < order.length; i++) {\r\n      dist += p5.dist(\r\n        points[order[i]].x,\r\n        points[order[i]].y,\r\n        points[order[i - 1]].x,\r\n        points[order[i - 1]].y\r\n      );\r\n    }\r\n    return dist;\r\n  };\r\n\r\n  nextOrder = (p5) => {\r\n    var largestI = -1;\r\n    for (let i = 0; i < order.length - 1; i++) {\r\n      if (order[i] < order[i + 1]) {\r\n        largestI = i;\r\n      }\r\n    }\r\n    if (largestI == -1) {\r\n      complete = true;\r\n      console.log(\"finished\");\r\n    }\r\n    var largestJ = -1;\r\n    for (let j = 0; j < order.length; j++) {\r\n      if (order[largestI] < order[j]) {\r\n        largestJ = j;\r\n      }\r\n    }\r\n    this.swap(order, largestI, largestJ);\r\n    var endArray = order.splice(largestI + 1);\r\n    endArray.reverse();\r\n    order = order.concat(endArray);\r\n  };\r\n\r\n  swap(array, i, j) {\r\n    let temp = array[i];\r\n    array[i] = array[j];\r\n    array[j] = temp;\r\n  }\r\n\r\n  showLines = (order, p5, r, g, b, strokeWeight) => {\r\n    p5.beginShape();\r\n    p5.stroke(r, g, b);\r\n    p5.strokeWeight(strokeWeight);\r\n    p5.noFill();\r\n    for (let i = 0; i < order.length; i++) {\r\n      p5.vertex(points[order[i]].x, points[order[i]].y);\r\n    }\r\n    p5.endShape();\r\n  };\r\n\r\n  showPoints = (p5) => {\r\n    for (let i = 0; i < points.length; i++) {\r\n      p5.fill(points[i].r, points[i].g, points[i].b);\r\n      p5.ellipse(points[i].x, points[i].y, 15, 15);\r\n    }\r\n  };\r\n\r\n  mousePressed = (e) => {\r\n    if (this.state.stage === 0) {\r\n      let x = e.mouseX;\r\n      let y = e.mouseY;\r\n      if (x > 0 && x < width && y > 0 && y < height) {\r\n        points.push(new Point(x, y));\r\n      }\r\n    }\r\n  };\r\n\r\n  onBackButtonClick = () => {\r\n    points = [];\r\n    order = [];\r\n    this.props.onBackButtonClick();\r\n  };\r\n\r\n  onClearButtonClick = () => {\r\n    points = [];\r\n    order = [];\r\n    this.setState({ stage: 0 });\r\n  };\r\n\r\n  onStartButtonClick = () => {\r\n    order = [];\r\n    for (let i = 0; i < points.length; i++) {\r\n      order.push(i);\r\n    }\r\n    console.log(order);\r\n    this.setState({ stage: 1 });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <NavBar\r\n          stage={this.state.stage}\r\n          onBackButtonClick={this.onBackButtonClick}\r\n          onClearButtonClick={this.onClearButtonClick}\r\n          onStartButtonClick={this.onStartButtonClick}\r\n        />\r\n        <Sketch\r\n          setup={this.setup}\r\n          draw={this.draw}\r\n          mousePressed={this.mousePressed}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TSP;\r\n"]},"metadata":{},"sourceType":"module"}